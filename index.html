<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìŠ¤ìŠ¹ë‹˜ X ì„œìˆ˜ì—° í”„ë¡œ ìˆê²Œì„ í´ë˜ìŠ¤</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />

  <style>
    body{
      font-family:"Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto,
        "Helvetica Neue","Segoe UI","Apple SD Gothic Neo","Noto Sans KR","Malgun Gothic",sans-serif;
      background:#f8fafc; overflow-x:hidden;
    }
    .aspect-4-5{ aspect-ratio:4/5; }
    .tap{ -webkit-tap-highlight-color: transparent; }
  </style>

  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.2.0",
        "react-dom/client": "https://esm.sh/react-dom@19.2.0/client",
        "@google/genai": "https://esm.sh/@google/genai@1.40.0"
      }
    }
  </script>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useCallback, useEffect, useMemo, useState } from "react";
    import { createRoot } from "react-dom/client";
    import { GoogleGenAI } from "@google/genai";
    const h = React.createElement;

    const CTA_URL = "http://pf.kakao.com/_kxawRn/chat";

    const GLOBAL_PROMPT_PREFIX = `
[CORE OUTPUT]
- 4:5 vertical card scene image for mobile.
- Keep SAFE AREA padding 8% on all sides. No cropping.
- Include bottom navigation UI visually â€œâ—€ n/8 â–¶â€ inside the card bottom (visual only).
- Include a CTA button shape at the bottom center (visual only).
- Korean text only. Pretendard-like modern sans-serif. Not oversized. Natural line breaks.
- No real photos. No app mockups. No screenshots.
- Golf-only environment: green / putting / bunker / approach / outdoor course. No office. No plain single color.

[CHARACTER STYLE â€” MUST]
- Realistic 3D humans ONLY. High-end commercial advertising look (Midjourney realistic 3D ad style).
- Natural body proportions, natural faces, photorealistic skin texture.
- NOT cute. NOT chibi. NOT Pixar. NOT Disney. NOT anime.

[COACH â€” MUST]
- Beautiful Korean female golf professional (ì„œìˆ˜ì—° í”„ë¡œ ëŠë‚Œ), slim athletic, modern golf cap,
  fitted golf top, golf skirt or slacks, confident coaching posture, slight smile, professional vibe.
- Coach role must be obvious, often centered.

[STUDENTS]
- Mixed male/female amateurs, everyday golf wear, slightly awkward posture,
  relatable expressions (frustrated / focused / surprised).

[SCENE DIRECTION â€” MUST]
- Each page is a specific SCENE showing emotion + action + flow (not generic golf background).
- Use cinematic depth of field, sunlight, soft lens flare when relevant.
- Composition: foreground characters + midground action + background scenery.

[SPECIAL PAGES]
- Benefit page: coupon / percent / ticket / coin-style BENEFIT icons (graphic icons only; no cash).
- Apply page: blurred chat-style background with 2â€“3 Korean bubbles (generic style; not a screenshot).
- Do NOT merge discounts. Keep: â€œë ˆìŠ¨ 15% í• ì¸ + 2ì¸ ë™ë°˜ ì‹œ ì—°ìŠµì¥ë¹„ 50% ì§€ì›(ìµœëŒ€ 2ë§Œì›/ì¡°ê±´ë³„)â€.
    `.trim();

    const PAGES = [
      {
        id: 1,
        subtitle: "2026 ì‹œì¦Œ ëŒ€ë¹„",
        titleLines: ["ìˆê²Œì„ë§Œ ì¡ì•„ë„"],
        highlightText: "10íƒ€ëŠ” ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤",
        highlightClass: "text-blue-600",
        descriptionLines: ["ìŠ¤ìŠ¹ë‹˜ X ì„œìˆ˜ì—° í”„ë¡œ"],
        prompt: `
[PAGE 1 â€” ì‹œì¦Œ ì‹œì‘(í›„í‚¹)]
Scene: â€œì•„â€¦ ì‹œì¦Œ ì‹œì‘ì´êµ¬ë‚˜â€
Background: wide outdoor golf course panorama, bright blue sky, wide green, warm sunlight,
a small distant golf cart, gentle lens flare, fresh season opening vibe.
Action/Emotion: coach leads the moment confidently, students feel motivated/excited.
Foreground: coach centered, 1â€“2 amateurs nearby reacting positively.
Add subtle card frame feeling + safe area.
Add bottom nav â€œâ—€ 1/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 2,
        subtitle: "ìˆê²Œì„ í•˜ë‚˜ë¡œ 5íƒ€ ì´ìƒ ê°ëŸ‰",
        titleLines: ["ë“œë¼ì´ë²„ ì˜ ì³ë†“ê³ ", "ê·¸ë¦° ì£¼ë³€ì—ì„œ ê¹Œë¨¹ëŠ” ìŠ¤ì½”ì–´.."],
        emphasizeText: "ë„ˆë¬´ ì—´ë°›ì§€ ì•Šìœ¼ì„¸ìš”?",
        emphasizeClass: "text-red-500",
        descriptionLines: ["ì—°ìŠµì¥ì—ì„œëŠ” í”„ë¡œ,", "í•„ë“œì—ì„œëŠ” ë°±ëŒì´."],
        prompt: `
[PAGE 2 â€” ë¶„ë…¸ + ì•„ì‰¬ì›€(ë¬¸ì œ ê³µê°)]
Scene: â€œì•„ ì”¨â€¦ ë˜ ì—¬ê¸°ì„œ ë¬´ë„ˆì¡Œë„¤â€
Background: around the green, ball stopped very close to the hole (painful near-miss),
fringe/green detail, soft sunlight, shallow depth of field.
Include a blurred scoreboard in the back suggesting double bogey (abstract/blur; not readable UI).
Action/Emotion: amateur holding putter, scratching head, frustrated; coach empathizes and explains.
Add bottom nav â€œâ—€ 2/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 3,
        subtitle: "ì–´í”„ë¡œì¹˜ Â· ë²™ì»¤ Â· í¼íŒ…",
        titleLines: ["ì„œìˆ˜ì—° í”„ë¡œ", "ìˆê²Œì„ í´ë˜ìŠ¤"],
        descriptionLines: ["ì‹¤ì „ë§Œ ì§‘ì¤‘í•˜ëŠ” 2ì‹œê°„"],
        prompt: `
[PAGE 3 â€” í”„ë¡œ ë“±ì¥(ì†”ë£¨ì…˜)]
Scene: â€œì•„ ì—¬ê¸°ì„œ ë°°ìš°ëŠ”êµ¬ë‚˜â€
Background: short game practice zone with target mat, approach distance markers, small cones/flag,
coach has subtle rim light/hero light behind her.
Action/Emotion: coach demonstrates wedge/chip technique; amateur watches focused with â€œahaâ€.
Add bottom nav â€œâ—€ 3/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 4,
        titleLines: ["í´ë˜ìŠ¤ í•µì‹¬ í¬ì¸íŠ¸"],
        points: ["âœ” ì´ë¡  ìµœì†Œ", "âœ” ì‹¤ì „ ì§‘ì¤‘", "âœ” ì†Œìˆ˜ì •ì˜ˆ ë‹¨ë…", "âœ” ë‚ ì§œ ì§ì ‘ ì„ íƒ"],
        prompt: `
[PAGE 4 â€” ì²´ê³„ì ì¸ ì½”ì¹­(íŠ¹ì§•)]
Scene: â€œì•„ ê·¸ëƒ¥ ì¹˜ëŠ”ê²Œ ì•„ë‹ˆë„¤â€
Background: practice green + a small portable whiteboard,
trajectory arrow graphics on the board, subtle ball flight overlay line.
Action/Emotion: coach points at board; amateur nods, understanding.
Add bottom nav â€œâ—€ 4/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 5,
        titleLines: ["í˜œíƒ í­ë°œ"],
        points: [
          "ìˆê²Œì„ ë ˆìŠ¨ 15% í• ì¸",
          "+ 2ì¸ ë™ë°˜ ì‹œ ì—°ìŠµì¥ë¹„ 50% ì§€ì›",
          "(ì—°ìŠµì¥ë¹„ ìµœëŒ€ 2ë§Œì› / ì¡°ê±´ë³„ ì ìš©)"
        ],
        prompt: `
[PAGE 5 â€” í˜œíƒ í­ë°œ(í•µì‹¬)]
Scene: â€œì˜¤ í˜œíƒ ê´œì°®ì€ë°?â€
Background: benefit icons raining lightly: coupon tickets, % icons, voucher tags,
coin/point-style graphic icons (NOT cash, NOT real money visuals).
Add a very blurred practice range entrance gate/check-in gate in the far background.
Action/Emotion: students surprised/happy; coach confident smile.
IMPORTANT: do NOT merge discounts into one percent.
Add bottom nav â€œâ—€ 5/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 6,
        titleLines: ["ì´ëŸ° ë¶„ê»˜ ì¶”ì²œí•©ë‹ˆë‹¤"],
        points: [
          "â€¢ ì‹œì¦Œ ì²« ë¼ìš´ë”© ì¤€ë¹„",
          "â€¢ ìˆê²Œì„ ë•Œë¬¸ì— ì ìˆ˜ ì•ˆ ì¤„ì–´ë“œëŠ” ë¶„",
          "â€¢ ì—°ìŠµì¥ê³¼ í•„ë“œ ì°¨ì´ ëŠë¼ëŠ” ë¶„",
          "â€¢ ì¹œêµ¬ì™€ ê°™ì´ ë°°ìš°ê³  ì‹¶ì€ ë¶„"
        ],
        prompt: `
[PAGE 6 â€” ë‚´ ì–˜ê¸°ë„¤(ì¶”ì²œ ëŒ€ìƒ)]
Scene: â€œì–´ ë‚˜ì–ì•„â€
Background: practice green with multiple amateurs (3â€“4) male/female, different expressions.
Speech bubbles keywords in Korean: â€œì‹œì¦Œ ì¤€ë¹„â€, â€œìˆê²Œì„â€¦â€, â€œë°±ëŒì´ íƒˆì¶œâ€.
Action/Emotion: each amateur reflects their situation; coach behind/center as confident helper.
Add bottom nav â€œâ—€ 6/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 7,
        titleLines: ["ì‹ ì²­ ë°©ë²•"],
        descriptionLines: [
          "í•˜ë‹¨ [ì‹ ì²­í•˜ê¸°] í´ë¦­ â†’",
          "ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì±„íŒ… ì—°ê²°",
          "",
          "ì›í•˜ì‹œëŠ” ë‚ ì§œ ë§ì”€ ì£¼ì‹œë©´",
          "ë ˆìŠ¨ ì¼ì • ë°”ë¡œ ì¡ì•„ë“œë¦½ë‹ˆë‹¤."
        ],
        prompt: `
[PAGE 7 â€” ì§€ê¸ˆ í–‰ë™(ì „í™˜)]
Scene: â€œì•„ ì´ë ‡ê²Œ ì‹ ì²­í•˜ëŠ”êµ¬ë‚˜â€
Background: blurred chat-style UI background (generic style; NOT a screenshot; NOT an app mockup),
include 2â€“3 Korean chat bubbles:
â€œìˆê²Œì„ í´ë˜ìŠ¤ ë¬¸ì˜ë“œë ¤ìš”â€
â€œë‚ ì§œ ì–¸ì œ ê°€ëŠ¥í• ê¹Œìš”?â€
(optional) â€œ2ì¸ë„ ê°€ëŠ¥í• ê¹Œìš”?â€
Foreground: a realistic 3D hand tapping a smartphone screen (action).
Coach subtly present as helpful presence.
Add bottom nav â€œâ—€ 7/8 â–¶â€ and CTA button shape inside card.
        `.trim(),
      },
      {
        id: 8,
        subtitle: "ìˆê²Œì„ì´ ë°”ë€Œë©´ ê³¨í”„ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.",
        titleLines: ["ì§€ê¸ˆ ë°”ë¡œ ì‹ ì²­í•˜ì„¸ìš”"],
        hasCta: true,
        prompt: `
[PAGE 8 â€” ê²°ê³¼ ìƒìƒ(CTA)]
Scene: â€œë‚˜ë„ ì €ë ‡ê²Œ ë˜ê³  ì‹¶ë‹¤â€
Background: ball dropping into the hole at the exact moment, dynamic motion,
sunlight + lens flare, panoramic course vibe, depth of field.
Action/Emotion: amateurs cheering, joyful body language; coach proud smile.
Include button text area for â€œìˆê²Œì„ í´ë˜ìŠ¤ ì‹ ì²­í•˜ê¸°â€ and CTA button shape.
Add bottom nav â€œâ—€ 8/8 â–¶â€ inside card.
        `.trim(),
      }
    ];

    async function genImage(apiKey, pagePrompt) {
      if (!apiKey) return null;
      try {
        const ai = new GoogleGenAI({ apiKey });
        const response = await ai.models.generateContent({
          model: "gemini-2.5-flash-image",
          contents: { parts: [{ text: (GLOBAL_PROMPT_PREFIX + "\n\n" + pagePrompt).trim() }] },
          config: { imageConfig: { aspectRatio: "4:5" } }
        });
        const parts = response?.candidates?.[0]?.content?.parts || [];
        for (const p of parts) {
          if (p.inlineData) return `data:${p.inlineData.mimeType};base64,${p.inlineData.data}`;
        }
        return null;
      } catch (e) {
        console.error(e);
        return null;
      }
    }

    function svgData(svg) {
      return "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svg);
    }

    function FallbackScene({ pageId }) {
      // Page-specific richer fallback (always non-empty, scene-like)
      const scenes = {
        1: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#5ac8ff"/><stop offset="0.55" stop-color="#dff5ff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#bff3d6"/><stop offset="1" stop-color="#34d399"/>
    </linearGradient>
    <radialGradient id="sun" cx="75%" cy="18%" r="45%">
      <stop offset="0" stop-color="#fff7c2" stop-opacity="0.95"/>
      <stop offset="0.35" stop-color="#fff7c2" stop-opacity="0.35"/>
      <stop offset="1" stop-color="#fff7c2" stop-opacity="0"/>
    </radialGradient>
    <filter id="blur8"><feGaussianBlur stdDeviation="8"/></filter>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="18" flood-color="#0b3a8a" flood-opacity="0.22"/>
    </filter>
  </defs>
  <rect width="800" height="1000" fill="url(#sky)"/>
  <circle cx="620" cy="180" r="220" fill="url(#sun)"/>
  <path d="M0,620 C160,560 320,600 440,560 C560,520 680,540 800,510 L800,1000 L0,1000 Z" fill="url(#green)" opacity="0.98"/>
  <path d="M0,705 C200,650 360,700 520,650 C650,610 740,640 800,625 L800,1000 L0,1000 Z" fill="#0ea5e9" opacity="0.08"/>
  <!-- Distant cart -->
  <g transform="translate(560 560) scale(0.8)" opacity="0.35" filter="url(#blur8)">
    <rect x="0" y="30" width="140" height="40" rx="14" fill="#1f2937"/>
    <rect x="25" y="0" width="90" height="35" rx="10" fill="#374151"/>
    <circle cx="35" cy="80" r="14" fill="#111827"/>
    <circle cx="110" cy="80" r="14" fill="#111827"/>
  </g>
  <!-- Lens flare -->
  <g opacity="0.35">
    <circle cx="610" cy="205" r="28" fill="#ffffff" opacity="0.25"/>
    <circle cx="520" cy="255" r="16" fill="#ffffff" opacity="0.18"/>
    <circle cx="455" cy="310" r="10" fill="#ffffff" opacity="0.12"/>
  </g>
  <!-- Card vignette -->
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        2: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky2" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#62d0ff"/><stop offset="0.6" stop-color="#eefaff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green2" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c6f7dd"/><stop offset="1" stop-color="#22c55e"/>
    </linearGradient>
    <filter id="blur6"><feGaussianBlur stdDeviation="6"/></filter>
  </defs>
  <rect width="800" height="1000" fill="url(#sky2)"/>
  <path d="M0,610 C180,550 360,610 520,560 C650,520 740,560 800,535 L800,1000 L0,1000 Z" fill="url(#green2)"/>
  <!-- Hole area -->
  <ellipse cx="455" cy="710" rx="170" ry="40" fill="#0f766e" opacity="0.12"/>
  <circle cx="465" cy="700" r="18" fill="#111827" opacity="0.65"/>
  <circle cx="465" cy="700" r="8" fill="#000000" opacity="0.65"/>
  <!-- Near-miss ball -->
  <circle cx="520" cy="688" r="16" fill="#ffffff"/>
  <circle cx="520" cy="688" r="16" fill="none" stroke="#e5e7eb" stroke-width="3"/>
  <!-- Blurred scoreboard -->
  <g filter="url(#blur6)" opacity="0.38" transform="translate(85 165)">
    <rect x="0" y="0" width="280" height="120" rx="18" fill="#111827"/>
    <rect x="18" y="18" width="244" height="26" rx="10" fill="#374151"/>
    <rect x="18" y="56" width="160" height="22" rx="9" fill="#ef4444" opacity="0.8"/>
    <rect x="18" y="84" width="200" height="18" rx="9" fill="#9ca3af"/>
  </g>
  <!-- Vignette -->
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        3: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky3" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#53c7ff"/><stop offset="0.58" stop-color="#eaf9ff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green3" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c8f7e0"/><stop offset="1" stop-color="#10b981"/>
    </linearGradient>
    <radialGradient id="spot" cx="55%" cy="42%" r="38%">
      <stop offset="0" stop-color="#ffffff" stop-opacity="0.6"/>
      <stop offset="1" stop-color="#ffffff" stop-opacity="0"/>
    </radialGradient>
  </defs>
  <rect width="800" height="1000" fill="url(#sky3)"/>
  <path d="M0,640 C180,580 360,640 520,600 C660,565 760,590 800,575 L800,1000 L0,1000 Z" fill="url(#green3)"/>
  <!-- Target mat -->
  <g transform="translate(150 650)">
    <rect x="0" y="0" width="260" height="140" rx="26" fill="#0ea5e9" opacity="0.18"/>
    <circle cx="130" cy="70" r="44" fill="#ffffff" opacity="0.8"/>
    <circle cx="130" cy="70" r="24" fill="#ef4444" opacity="0.65"/>
    <circle cx="130" cy="70" r="10" fill="#111827" opacity="0.7"/>
  </g>
  <!-- Distance markers -->
  <g opacity="0.55">
    <rect x="515" y="650" width="80" height="36" rx="12" fill="#111827" opacity="0.35"/>
    <rect x="515" y="700" width="120" height="36" rx="12" fill="#111827" opacity="0.26"/>
    <rect x="515" y="750" width="95" height="36" rx="12" fill="#111827" opacity="0.22"/>
  </g>
  <!-- Spotlight behind coach position -->
  <circle cx="440" cy="420" r="240" fill="url(#spot)"/>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        4: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky4" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#5fd0ff"/><stop offset="0.6" stop-color="#eefaff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green4" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c8f7e0"/><stop offset="1" stop-color="#22c55e"/>
    </linearGradient>
  </defs>
  <rect width="800" height="1000" fill="url(#sky4)"/>
  <path d="M0,635 C170,575 360,640 520,595 C660,555 760,590 800,570 L800,1000 L0,1000 Z" fill="url(#green4)"/>
  <!-- Whiteboard -->
  <g transform="translate(120 280)">
    <rect x="0" y="0" width="360" height="260" rx="26" fill="#ffffff" opacity="0.92"/>
    <rect x="18" y="18" width="324" height="224" rx="18" fill="#f1f5f9"/>
    <!-- Trajectory arrows -->
    <path d="M70 180 C140 90 220 120 290 60" fill="none" stroke="#2563eb" stroke-width="10" stroke-linecap="round"/>
    <path d="M285 58 L320 60 L300 90 Z" fill="#2563eb"/>
    <path d="M75 190 C155 170 195 220 290 210" fill="none" stroke="#ef4444" stroke-width="8" stroke-linecap="round" opacity="0.85"/>
    <circle cx="76" cy="190" r="10" fill="#111827" opacity="0.65"/>
  </g>
  <!-- Overlay flight line -->
  <path d="M120 720 C280 640 380 670 560 590" fill="none" stroke="#ffffff" stroke-width="6" stroke-dasharray="14 14" opacity="0.55"/>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        5: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky5" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#51c7ff"/><stop offset="0.58" stop-color="#eaf9ff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green5" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c8f7e0"/><stop offset="1" stop-color="#10b981"/>
    </linearGradient>
    <filter id="blur7"><feGaussianBlur stdDeviation="7"/></filter>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="18" flood-color="#0b3a8a" flood-opacity="0.18"/>
    </filter>
  </defs>
  <rect width="800" height="1000" fill="url(#sky5)"/>
  <path d="M0,640 C180,585 360,640 520,600 C660,565 760,585 800,575 L800,1000 L0,1000 Z" fill="url(#green5)"/>
  <!-- Blurred gate -->
  <g filter="url(#blur7)" opacity="0.28" transform="translate(505 530)">
    <rect x="0" y="0" width="220" height="150" rx="20" fill="#111827"/>
    <rect x="20" y="26" width="180" height="24" rx="10" fill="#9ca3af"/>
    <rect x="20" y="66" width="120" height="18" rx="9" fill="#34d399"/>
    <rect x="20" y="96" width="160" height="18" rx="9" fill="#60a5fa"/>
  </g>
  <!-- Benefit icons -->
  <g filter="url(#shadow)">
    <g transform="translate(120 210)">
      <rect x="0" y="0" width="160" height="110" rx="26" fill="#ffffff" opacity="0.92"/>
      <text x="30" y="74" font-size="54" font-family="Pretendard, sans-serif" font-weight="800" fill="#2563eb">%</text>
    </g>
    <g transform="translate(320 250)">
      <path d="M0 26 Q0 0 26 0 H170 Q196 0 196 26 V110 Q196 136 170 136 H26 Q0 136 0 110 Z" fill="#fff7ed" stroke="#fb923c" stroke-width="8" opacity="0.96"/>
      <circle cx="160" cy="28" r="10" fill="#fb923c"/>
    </g>
    <g transform="translate(170 380)">
      <rect x="0" y="0" width="240" height="120" rx="30" fill="#eef2ff" stroke="#6366f1" stroke-width="8" opacity="0.96"/>
      <circle cx="55" cy="60" r="18" fill="#6366f1"/>
      <circle cx="95" cy="60" r="18" fill="#6366f1" opacity="0.75"/>
      <circle cx="135" cy="60" r="18" fill="#6366f1" opacity="0.55"/>
    </g>
  </g>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        6: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky6" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#58ccff"/><stop offset="0.6" stop-color="#eefaff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green6" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c8f7e0"/><stop offset="1" stop-color="#22c55e"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="18" flood-color="#0b3a8a" flood-opacity="0.18"/>
    </filter>
  </defs>
  <rect width="800" height="1000" fill="url(#sky6)"/>
  <path d="M0,640 C180,580 360,650 520,600 C660,565 760,595 800,580 L800,1000 L0,1000 Z" fill="url(#green6)"/>
  <!-- Speech bubbles -->
  <g filter="url(#shadow)" opacity="0.98">
    <g transform="translate(120 240)">
      <rect x="0" y="0" width="210" height="96" rx="26" fill="#ffffff"/>
      <path d="M60 96 L85 96 L70 122 Z" fill="#ffffff"/>
      <text x="30" y="60" font-size="30" font-family="Pretendard, sans-serif" font-weight="800" fill="#111827">ì‹œì¦Œ ì¤€ë¹„</text>
    </g>
    <g transform="translate(420 290)">
      <rect x="0" y="0" width="220" height="96" rx="26" fill="#ffffff"/>
      <path d="M160 96 L185 96 L175 122 Z" fill="#ffffff"/>
      <text x="30" y="60" font-size="30" font-family="Pretendard, sans-serif" font-weight="800" fill="#111827">ìˆê²Œì„â€¦</text>
    </g>
    <g transform="translate(210 430)">
      <rect x="0" y="0" width="260" height="96" rx="26" fill="#ffffff"/>
      <path d="M115 96 L140 96 L128 122 Z" fill="#ffffff"/>
      <text x="30" y="60" font-size="30" font-family="Pretendard, sans-serif" font-weight="800" fill="#111827">ë°±ëŒì´ íƒˆì¶œ</text>
    </g>
  </g>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        7: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="bg7" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#52caff"/><stop offset="0.55" stop-color="#eaf9ff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <filter id="blur9"><feGaussianBlur stdDeviation="9"/></filter>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="18" flood-color="#0b3a8a" flood-opacity="0.18"/>
    </filter>
  </defs>
  <rect width="800" height="1000" fill="url(#bg7)"/>
  <!-- Blurred chat background -->
  <g filter="url(#blur9)" opacity="0.55" transform="translate(80 170)">
    <rect x="0" y="0" width="640" height="560" rx="40" fill="#ffffff"/>
    <rect x="40" y="70" width="420" height="72" rx="28" fill="#dbeafe"/>
    <rect x="200" y="170" width="400" height="72" rx="28" fill="#e5e7eb"/>
    <rect x="40" y="270" width="470" height="72" rx="28" fill="#dbeafe"/>
  </g>
  <!-- Foreground phone -->
  <g filter="url(#shadow)" transform="translate(240 560)" opacity="0.98">
    <rect x="0" y="0" width="320" height="380" rx="52" fill="#111827"/>
    <rect x="20" y="26" width="280" height="320" rx="34" fill="#f8fafc"/>
    <circle cx="160" cy="355" r="16" fill="#374151"/>
  </g>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`,

        8: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 1000">
  <defs>
    <linearGradient id="sky8" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#4fc6ff"/><stop offset="0.58" stop-color="#eaf9ff"/><stop offset="1" stop-color="#ffffff"/>
    </linearGradient>
    <linearGradient id="green8" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#c8f7e0"/><stop offset="1" stop-color="#10b981"/>
    </linearGradient>
    <radialGradient id="sun8" cx="70%" cy="16%" r="48%">
      <stop offset="0" stop-color="#fff7c2" stop-opacity="0.95"/>
      <stop offset="0.35" stop-color="#fff7c2" stop-opacity="0.35"/>
      <stop offset="1" stop-color="#fff7c2" stop-opacity="0"/>
    </radialGradient>
  </defs>
  <rect width="800" height="1000" fill="url(#sky8)"/>
  <circle cx="580" cy="170" r="240" fill="url(#sun8)"/>
  <path d="M0,620 C200,560 360,620 520,575 C660,540 760,575 800,555 L800,1000 L0,1000 Z" fill="url(#green8)"/>
  <!-- Hole + ball drop moment -->
  <ellipse cx="420" cy="720" rx="180" ry="46" fill="#0f766e" opacity="0.12"/>
  <circle cx="430" cy="708" r="20" fill="#111827" opacity="0.66"/>
  <circle cx="430" cy="708" r="9" fill="#000000" opacity="0.66"/>
  <circle cx="430" cy="642" r="18" fill="#ffffff"/>
  <path d="M430 660 C430 680 430 690 430 700" stroke="#ffffff" stroke-width="5" stroke-dasharray="10 10" opacity="0.6"/>
  <!-- Cheer confetti -->
  <g opacity="0.6">
    <circle cx="120" cy="260" r="8" fill="#2563eb"/>
    <circle cx="160" cy="300" r="6" fill="#ef4444"/>
    <circle cx="200" cy="250" r="7" fill="#f59e0b"/>
    <circle cx="650" cy="280" r="8" fill="#22c55e"/>
    <circle cx="680" cy="320" r="6" fill="#6366f1"/>
  </g>
  <rect x="28" y="28" width="744" height="944" rx="56" fill="none" stroke="#ffffff" stroke-opacity="0.35" stroke-width="6"/>
</svg>`
      };

      const svg = scenes[pageId] || scenes[1];
      return h("img", { src: svgData(svg), className:"w-full h-full object-cover", alt:"fallback" });
    }

    function renderLines(lines) {
      const children = [];
      (lines || []).forEach((line, idx) => {
        children.push(h("span", { key:`l-${idx}` }, line));
        if (idx < lines.length - 1) children.push(h("br", { key:`br-${idx}` }));
      });
      return h("span", null, ...children);
    }

    function CardPage({ page, imageUrl, onPrev, onNext, index, total }) {
      const isFirst = index === 0;
      const isLast = index === total - 1;

      return h("div", { className:"relative w-full aspect-4-5 overflow-hidden rounded-[2.5rem] shadow-xl bg-white flex flex-col border border-gray-100" },
        h("div", { className:"absolute inset-0 w-full h-full" },
          imageUrl
            ? h("img", { src:imageUrl, alt:"scene", className:"w-full h-full object-cover" })
            : h(FallbackScene, { pageId: page.id }),
          h("div", { className:"absolute inset-0 bg-gradient-to-b from-white/45 via-white/10 to-white/55" })
        ),

        h("div", { className:"relative z-10 h-full flex flex-col justify-between p-8 md:p-10" },
          h("div", { className:"space-y-2" },
            page.subtitle
              ? h("span", { className:"inline-block px-4 py-1.5 bg-blue-600 text-white text-[10px] font-black rounded-full uppercase tracking-widest shadow-lg shadow-blue-100" }, page.subtitle)
              : null,

            page.titleLines
              ? h("h1", { className:"text-[1.35rem] md:text-3xl font-black text-gray-900 leading-[1.2] tracking-tight break-keep" }, renderLines(page.titleLines))
              : null,

            page.highlightText
              ? h("div", { className:"mt-1" },
                  h("span", { className:`text-[1.65rem] md:text-4xl font-black ${page.highlightClass || ""}` }, page.highlightText)
                )
              : null,

            page.emphasizeText
              ? h("div", { className:"mt-1" },
                  h("span", { className:`text-[1.45rem] md:text-3xl font-black ${page.emphasizeClass || ""}` }, page.emphasizeText)
                )
              : null,

            page.descriptionLines
              ? h("p", { className:"text-gray-700 font-bold text-[13px] md:text-base leading-[1.6] bg-white/60 backdrop-blur-sm inline-block px-3 py-2 rounded-xl break-keep" },
                  renderLines(page.descriptionLines)
                )
              : null
          ),

          h("div", { className:"flex-1 flex flex-col justify-center py-4" },
            page.points && page.points.length
              ? h("ul", { className:"space-y-3" },
                  ...page.points.map((pt, i) =>
                    h("li", { key:i, className:"bg-white/88 backdrop-blur-md p-4 rounded-2xl border border-gray-100 shadow-sm font-extrabold text-gray-800 flex items-start" },
                      h("span", { className:"mr-3 mt-1 w-5 h-5 flex-shrink-0 flex items-center justify-center bg-blue-600 text-white rounded-full text-[9px] font-black" }, "âœ“"),
                      h("span", { className:"leading-snug text-[14px] md:text-[15px] break-keep" }, pt)
                    )
                  )
                )
              : null
          ),

          h("div", { className:"space-y-3" },
            h("div", { className:"flex items-center justify-between" },
              h("button", {
                onClick:onPrev, disabled:isFirst,
                className:`tap px-4 py-2 rounded-full font-black text-sm border transition ${
                  isFirst ? "bg-white/45 text-gray-300 border-gray-200" : "bg-white/90 text-gray-700 border-gray-200 hover:bg-white"
                }`
              }, "â—€"),
              h("div", { className:"text-[11px] font-black text-gray-500 bg-white/70 backdrop-blur px-3 py-1.5 rounded-full border border-gray-100" },
                `${index+1} / ${total}`
              ),
              h("button", {
                onClick:onNext, disabled:isLast,
                className:`tap px-4 py-2 rounded-full font-black text-sm border transition ${
                  isLast ? "bg-white/45 text-gray-300 border-gray-200" : "bg-white/90 text-gray-700 border-gray-200 hover:bg-white"
                }`
              }, "â–¶")
            ),
            h("div", { className:"flex justify-center" },
              h("div", { className:"text-[9px] text-gray-400 font-black bg-white/65 backdrop-blur-sm px-4 py-2 rounded-full border border-gray-100 tracking-widest uppercase" },
                "SEUSEUNGNIM X SEO SU YEON"
              )
            )
          )
        )
      );
    }

    function App(){
      const apiKey = useMemo(() => localStorage.getItem("GEMINI_API_KEY") || "", []);
      const [activeIndex, setActiveIndex] = useState(0);
      const [images, setImages] = useState({});

      const page = PAGES[activeIndex];

      useEffect(() => {
        let mounted = true;
        (async () => {
          if (!apiKey) return;
          if (images[page.id]) return;
          const url = await genImage(apiKey, page.prompt);
          if (!mounted) return;
          if (url) setImages(prev => ({ ...prev, [page.id]: url }));
        })();
        return () => { mounted = false; };
      }, [apiKey, page.id, page.prompt, images]);

      const goPrev = useCallback(() => setActiveIndex(i => Math.max(0, i-1)), []);
      const goNext = useCallback(() => setActiveIndex(i => Math.min(PAGES.length-1, i+1)), []);
      const handleApply = useCallback(() => window.open(CTA_URL, "_blank"), []);

      return h("div", { className:"min-h-screen bg-slate-50 flex flex-col items-center pb-28" },
        h("div", { className:"w-full max-w-md mx-auto flex flex-col gap-6 p-4" },
          h("div", { className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 flex items-center justify-between" },
            h("div", { className:"flex flex-col" },
              h("span", { className:"text-[10px] font-black text-blue-600 tracking-widest uppercase" }, "Premium Lesson"),
              h("span", { className:"text-lg font-black text-gray-900" }, "ì„œìˆ˜ì—° í”„ë¡œì˜ ìˆê²Œì„")
            ),
            h("div", { className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center" },
              h("span", { className:"text-xl" }, "ğŸŒï¸â€â™€ï¸")
            )
          ),

          h(CardPage, {
            page,
            imageUrl: images[page.id],
            onPrev: goPrev,
            onNext: goNext,
            index: activeIndex,
            total: PAGES.length
          }),

          h("div", { className:"pt-2" },
            h("button", {
              onClick: handleApply,
              className:"tap w-full py-6 bg-[#FEE500] text-[#3c1e1e] font-black text-xl rounded-3xl shadow-2xl flex items-center justify-center gap-3 hover:bg-[#FDD800] active:scale-[0.97] transition-all"
            },
              h("img", {
                src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/KakaoTalk_logo.svg/2500px-KakaoTalk_logo.svg.png",
                className:"w-8 h-8",
                alt:"kakao"
              }),
              "ìˆê²Œì„ í´ë˜ìŠ¤ ì‹ ì²­í•˜ê¸°"
            ),
            h("p", { className:"mt-4 text-center text-gray-400 text-xs font-medium" }, "Â© 2026 SEUSEUNGNIM X PRO SEO SU YEON")
          )
        ),

        h("div", { className:"fixed bottom-0 left-0 right-0 p-5 max-w-md mx-auto z-30" },
          h("button", {
            onClick: handleApply,
            className:"tap w-full py-5 bg-[#FEE500] text-[#3c1e1e] font-black text-lg rounded-full shadow-[0_15px_40px_rgba(254,229,0,0.5)] flex items-center justify-center gap-3 border-4 border-white"
          },
            h("img", {
              src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/KakaoTalk_logo.svg/2500px-KakaoTalk_logo.svg.png",
              className:"w-6 h-6",
              alt:"kakao"
            }),
            "ì§€ê¸ˆ ë°”ë¡œ ë¬¸ì˜í•˜ê¸°"
          )
        )
      );
    }

    const rootEl = document.getElementById("root");
    createRoot(rootEl).render(h(React.StrictMode, null, h(App)));
  </script>
</body>
</html>
